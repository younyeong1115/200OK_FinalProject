<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
				xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
				layout:decorate="~{layout/layout}">
<th:block layout:fragment="content">
<head>
<link rel="stylesheet" href="../assets/css/my-info.css" />
<title>Insert title here</title>
<style type="text/css"></style>
</head>
<body>
	
	
	

	<div align="center"><h2>My Page</h2></div>
	
<!-- Mypage -->
		
  <div class="greenContainer">
    <div>
      <!-- <div class="grade">GOLD</div> -->
      <div th:text = "'ğŸ‘‹   ' +${user.userName} + 'ë‹˜ í™˜ì˜ í•©ë‹ˆë‹¤!'" class="name"></div>
    </div>    
    
  
    
    <div class="modify">
    <button onclick="location.href='edituserform'">íšŒì›ì •ë³´ìˆ˜ì •</button>
    <button onclick="location.href='adresslist'">ë°°ì†¡ì§€ê´€ë¦¬</button> 
     <div th:if="${userRole eq 'ADMIN'}">
    <button onclick="location.href='/ok/admin/adminhome'">ê´€ë¦¬ì í™ˆ</button> 
    </div>
    </div>    
  </div>
  

  <br>
  <div class="summaryContainer">
    <div class="item">
        <div style="margin-left: 50px;" class="number" th:text = "${cartCount}"></div>
        <div style="margin-left: 50px;">
    <a href="/ok/cart/cartform">ì¥ë°”êµ¬ë‹ˆ ëª©ë¡</a>
</div>
      </div>
        <!-- <div class="item">
        <div class="number" th:text = "${LikesCount}"></div>
        <div>ì°œ ëª©ë¡</div>
      </div> -->
     <div class="item">
        <div class="number" th:text = "${BoardCount}"></div>
        <div>ê²Œì‹œê¸€ ëª©ë¡</div>
      </div> 
  </div>  
  <br>
  
  <div class="shippingStatusContainer">
    <div class="title">
      ì£¼ë¬¸/ë°°ì†¡ì¡°íšŒ
    </div>
    <div class="status">
      
      <div class="item">
        <div>
       	 <div class="green number" th:text = "${beforeDeposit}"></div>
          <div class="text">ì…ê¸ˆ ì „</div>
        </div>
        <div class="icon"> > </div>
      </div>     
      <div class="item">
        <div>
          <div class="green number" th:text = "${PreparingProduct}"></div>
          <div class="text">ë°°ì†¡ ì¤€ë¹„ ì¤‘</div>
        </div>
        <div class="icon"> > </div>
      </div>     
      <div class="item">
        <div>
           <div class="green number" th:text = "${shipping}"></div>
          <div class="text">ë°°ì†¡ ì¤‘</div>
        </div>
        <div class="icon"> > </div>
      </div>     
      <div class="item">
        <div>
          <div class="green number" th:text = "${completed}"></div>
          <div class="text">ë°°ì†¡ ì™„ë£Œ</div>
        </div>
      </div>     
      
    </div>
    
  </div>  
  
<script>

const searchBtn = document.getElementById('search-btn');
const searchContainer = document.getElementById('search-container');

// ê²€ìƒ‰ì°½ê³¼ ê²€ìƒ‰ ë²„íŠ¼ì„ ë¯¸ë¦¬ ìƒì„±í•˜ê³  ì‚½ì…í•©ë‹ˆë‹¤.
const searchInput = document.createElement('input');
searchInput.type = 'text';
searchInput.placeholder = 'ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”';

const submitButton = document.createElement('button');
submitButton.innerText = 'ê²€ìƒ‰';
submitButton.className = 'submit-button';

searchContainer.appendChild(searchInput);
searchContainer.appendChild(submitButton);

// ê²€ìƒ‰ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
submitButton.addEventListener('click', () => {
  const searchValue = searchInput.value;
  window.location.href = `product/search?keyword=${searchValue}`;
});

// ë‹«ê¸° ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
const closeButton = document.createElement('span');
closeButton.innerHTML = '&times;';
closeButton.className = 'close-button';
closeButton.addEventListener('click', () => {
  searchContainer.removeChild(searchInput);
  searchContainer.removeChild(submitButton);
  searchContainer.removeChild(closeButton);
  searchContainer.classList.add('hidden');
});
searchContainer.appendChild(closeButton);

// ê²€ìƒ‰ ë²„íŠ¼ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ ê²€ìƒ‰ì°½ì´ ìƒê¸°ì§€ ì•Šë„ë¡ ìˆ˜ì •í•©ë‹ˆë‹¤.
searchBtn.addEventListener('click', () => {
  if (searchContainer.classList.contains('hidden')) {
    searchContainer.classList.remove('hidden');
  } else {
    searchContainer.classList.add('hidden');
  }
});

// ê²€ìƒ‰ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
submitButton.addEventListener('click', () => {
	  const searchValue = searchInput.value;
	  const xhr = new XMLHttpRequest();
	  xhr.open('GET', `product/search?keyword=${searchValue}`);
	  xhr.onload = function() {
	    if (xhr.status === 200) {
	      // ì„œë²„ë¡œë¶€í„° ë°›ì€ ì‘ë‹µì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
	    } else {
	      // ì—ëŸ¬ ì²˜ë¦¬ë¥¼ í•©ë‹ˆë‹¤.
	    }
	  };
	  xhr.send();
	});
</script>

  
</body>
</th:block>
</html>