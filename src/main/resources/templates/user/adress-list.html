<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=3.0">

<link rel="stylesheet" href="../assets/css/adress-list.css" />

<title>Insert title here</title>
<style type="text/css"></style>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"> 
</script> 
</head>
<body>
	
	<!--사이드바-->
	<div class="fx">
		<a href="#"> <img class="main"
			src="https://www.slou.co.kr/img/front/btn/cartBtn.png" width="50"></a>
		<a href="#"><img class="main"
			src="https://www.slou.co.kr/img/front/btn/searchBtn.png" width="50"></a>
	</div>

	
	<!--title-->
	
	<!--title-->
	<div class="d-box">
		<div class="titl">
			<div style="float: left; margin: 0 20px;">
				<a href="../user/logo">
				<img class="main" src="../image/logo.png" width="70"></a>
			</div>
			<ul class="f-list">
				<li><a href="#">Best</a></li>
				<li><a href="#">Products</a>
					<ul class="list-s">
						<li style="font-size: 0.8rem;"><a href="#">ring</a></li>
						<li style="font-size: 0.8rem;"><a href="#">bracelet</a></li>
						<li style="font-size: 0.8rem;"><a href="#">necklace</a></li>
						<li style="font-size: 0.8rem;"><a href="#">earing</a></li>
						<li style="font-size: 0.8rem;"><a href="#">watch</a></li>
						<li style="font-size: 0.8rem;"><a href="#">object</a></li>
					</ul></li>
				<li><a href="#">QnA</a></li>
				<li><a href="#">Notice</a></li>
			</ul>
				<ul class="s-list">
				<li><a href="#">찜하기</a></li>
				<li><a href="#">장바구니</a></li>
				<li><a href="">검색</a></li>
				<li><a href="user/login">로그인</a></li>
				<li><a href= "error">error</a></li> 
			</ul>
		</div>



		<br><br><br><br><br><br>

<!-- 배송지 목록 -->

	
	<div>
	 <div style=" font-size: 25px;" align="center" th:text = "${user.userName} + '님의 배송지 목록'" ></div>
	 
	 <div class="task" id="task2" th:each="d : ${delivery}">
  <ul>
    <li>
      <div><span style="font-weight: bold;font-size: 20px;">Name</span><br></div>
      <div style="font-size: 15px;" th:text="${d.deliveryName}"></div>
      <br>
      <div><span style="font-weight: bold;font-size: 20px;">Mobile</span><br></div>
      <div style="font-size: 15px;" th:text="${d.deliveryMobile}"></div>
      <br>
      <div><span style="font-weight: bold;font-size: 20px;">Address</span><br></div>
      <div style="font-size: 15px;" th:text="'(우편 번호 ' + ${d.deliveryAdd1} + ' )'"></div>
      <div style="font-size: 15px;" th:text="${d.deliveryAdd2} + '  ' + ${d.deliveryAdd3}"></div>
      
      <div align="right">
        <form action="../mypage/deliveryupdateform" method="GET">
      <input type="hidden" name="deliveryId" th:value="${d.deliveryId}">
  		<button type="submit">수정</button>
</form>

		<button th:onclick="'deleteDelivery(' + ${d.deliveryId} + ')'">삭제</button>

    
        <!-- 기본 배송지인 경우 -->
        <th:block th:if="${d.deliveryBasicyn == 'Y'}">
          <div  style="font-size: 16px;">기본 배송지</div>
        </th:block>

      </div>
    </li>
  </ul>
</div>
  
<div align="right">
	<button onclick="location.href='../mypage/deliveryaddform'">배송지 추가</button>
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
</div>
<!-- 둥근 버튼 -->
<!-- <button style="background-color: beige; border-radius: 50px ; font-size: 20px;">배송지 추가</button>
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
	&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp -->
		
	</div>
            

  

<br><br><br><br>


	<!--footer1-->
	<div class="d-box" style="background-color: #eee; padding: 30px 0px;">
		<div class="dd-box">
			<div class="container">
				<div class="con1">
					고객센터
					<hr>
					<p style="font-size: 1.1rem;">
						1600-0000<br> 
						<!-- <a href="#">카카오톡 플러스 친구</a> -->
					</p>
					<small>제품문의 · </small>
					<p>평일 09:30 - 17:30 | 점심시간 12:30 - 13:30
				</div>
				<div class="con2">
					기업고객 문의
					<hr>
					<p style="font-size: 1.1rem;">
						02-2222-22222<br> <a href="#">help@200OK.com</a>
					</p>
					<p>평일 10:30 - 17:30 | 점심시간 12:00 - 13:00
				</div>
				<div class="con3">
					Quick Menu
					<hr>
					<a href="#"> About US</a><br>
					<a href="#" style="font-weight: bold;">개인정보처리방침</a><br>
					<a href="#">이용약관</a>
				</div>
				<div class="con4">
					(주)200OK | 대표이사 · 김행운 | 서울특별시 영등포구 hta로 200OK <br>
					1600-0000 | <a href="#">luckyham@200OK.com</a> | 사업자등록번호 ·
					000-00-0000
					<p>
						통신판매업신고 · 2023-서울송파-0000호 | 부가통신사업신고필증 · 000000 <br> 
						개인정보보호 및 청소년보호 책임자 · 김행운 
					<p>Copyright (c) 2023 200OK Inc. All rights reserved
					<p>
				</div>
			</div>
		</div>
	</div>

	<!--footer2-->
	<div class="d-box" style="background-color: #bbb;">
		
			<div calss="foo">
				<div class="foo-ic">
					<a href="#"><img
						src="https://www.slou.co.kr/img/front/main/video.png"></a>
				</div>
				<div class="foo-ic">
					<a href="#"><img
						src="https://www.slou.co.kr/img/front/main/blog.png"></a>
				</div>
				<div class="foo-ic">
					<a href="#"><img
						src="https://www.slou.co.kr/img/front/main/facebook.png"></a>
				</div>
				<div class="foo-ic">
					<a href="#"><img
						src="https://www.slou.co.kr/img/front/main/instagram.png"></a>
				</div>
			</div>
		</div>
	</div>
<!-- axios 사용 설정 -->
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
/*   function deleteDelivery(deliveryId) {
	  console.log(deliveryId);
     $.ajax({
      url: 'mypage/deliverydelete?deliveryId=' + deliveryId,
      type: 'DELETE',
      success: function(result) {
        // 삭제 성공한 경우, 리스트를 다시 출력합니다.
        window.location.href = '/delivery';
      },
      error: function(xhr, status, error) {
        // 삭제 실패한 경우, 에러 메시지를 출력합니다.
        alert(error);
      },
      complete: function() {
    	    console.log(deliveryId);
    	    // 이곳에서 항상 실행되어야 하는 코드를 작성합니다.
    	  }
    }); 
  } */
  
  function deleteDelivery(deliveryId) {
	
	  axios({
		    method: 'get',
		    url: 'deliverydelete?deliveryId=' + deliveryId
		  })
		    .then(function (response) {
		      // 삭제 성공
		      //alert("hi");
		      window.location.href = 'adresslist';
		    })
		    .catch(function (error) {
		      // 삭제 실패 시 에러 메시지 출력
		      alert(error);
		    })
		   
	}
</script>

  
</body>
</html>